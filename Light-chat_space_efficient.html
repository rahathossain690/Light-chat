<title>Light Chat</title><script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script><body style="font-size: 15px;" bgcolor="#2d2d2d"><div class="head"><h5>LIGHT-CHAT</h5></div><br><div class="box" align="center"><div class = "hide" Id="main" style="position: absolute;top:0; background-color: #2d2f2f"><table width="450px;" ><tr><td colspan="2" width="80%"></td><td width="" align="center"><button onclick=" logOut() ">Log Out</button></td></tr><tr><td colspan="3" height="420px;" align="left"><div style="width: 98%;height: 100%;overflow: auto;padding: 5px 5px;background-color: #5A5A5A" Id="text" align="left"></div></td></tr><tr style="padding: 2px 2px;"><td colspan="2" height="50px;"><textarea style="width: 100%;height: 100%;" placeholder="Write Message Here" Id="msg"></textarea></td><td align="center"><button onclick = " send() ">Send</button></td></tr></table></div><div class="first" Id="first">What Do you want to do?<br><br><br><button onclick = " firstPageSignIn() ">Sign In</button> <br><br><button onclick = " firstPageSignUp() ">Sign Up</button> </div><div class = "signup hide" Id="signup">Sign Up<br>Fill the following fields. <br><br><br>Email &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <input type = "text" Id="signupemail"/><br><br>Password : <input type = "password" Id="signuppassword"/><br><br>Confirm<br>Password : <input type = "password" Id="confirm"/><br><br><button onclick="signUp()">Sign Up</button><button onclick=" back() ">Back</button><br><br><p style="color:red;" Id="errorUp"></p></div><div class = "login hide" Id="login">Sign In.<br><br>Email &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <input type="text" Id="signinemail"/><br><br>Password : <input type="password" Id="signinpassword"/><br><br><br><button onclick=" signIn() " >Log In</button><button onclick=" back() ">Back</button><br><br><p style="color:red;" Id="errorIn"></p></div></div><script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script><script> var config = { apiKey: "AIzaSyDgq-uaNqQpnnM7_eqsvH7QR8VudQjXt-Q", authDomain: "fir-efa5b.firebaseapp.com", databaseURL: "https://fir-efa5b.firebaseio.com", projectId: "fir-efa5b", storageBucket: "fir-efa5b.appspot.com", messagingSenderId: "396743328974" }; firebase.initializeApp(config);</script><style type="text/css">table{border-collapse: collapse;}.box{width: 450px;height: 500px;border : 2px dotted white;text-align: left;position: relative;}.head{width: 450px;height: 50px;color: white;text-align: center;border: 3px dotted white;}.hide{visibility: hidden;}.login{padding: 10px 10px;color: white;position: absolute;top: 0;}.first{position: absolute;top : 0;padding: 10px 10px;color : white;}.message{width: 95%;max-width: 95%;color: white;background-color: #8D8D8D;border-radius: 10px;padding: 2px 2px;}.hayre{max-width: 95%;display: inline;}.messageMe{width: 95%;max-width: 95%;color: black;background-color: #E4E4E4;border-radius: 10px;padding: 2px 2px;}.signup{position: absolute;top: 0;color: white;padding: 10px 10px;}</style><script>const firstPage = document.getElementById("first");const signInPage = document.getElementById("login");const signUpPage = document.getElementById("signup");const mainPage = document.getElementById("main");const upEmail = document.getElementById("signupemail");const upPass = document.getElementById("signuppassword");const inEmail = document.getElementById("signinemail");const inPass = document.getElementById("signinpassword");const errorIn = document.getElementById("errorIn");const errorUp = document.getElementById("errorUp");const database = firebase.database();const auth = firebase.auth();const textarea = document.getElementById("text");const messageBody = document.getElementById("msg");const confirm = document.getElementById("confirm");var user = ""; var totalMessage = 1;function firstPageSignUp(){firstPage.classList.add("hide");signUpPage.classList.remove("hide");}function firstPageSignIn(){firstPage.classList.add("hide");signInPage.classList.remove("hide");}function signIn(){const email = inEmail.value.trim();const pass = inPass.value.trim();var promise = firebase.auth().signInWithEmailAndPassword(email, pass);var done = 1;promise.catch( e => {errorIn.innerHTML = e.message;done = 0;});if(done) inEmail.value = "", inPass.value = "", errorIn.innerHTML = "";}function back(){signInPage.classList.add("hide");signUpPage.classList.add("hide");firstPage.classList.remove("hide");upEmail.value = "", upPass.value = "";inEmail.value = "", inPass.value = "";}function signUp(){const email = upEmail.value.trim();const pass = upPass.value.trim();var repass = confirm.value.trim();if(pass != repass) {errorUp.innerHTML = "Passwords not matched.";return;}var promise = firebase.auth().createUserWithEmailAndPassword(email, pass);var done = 1;promise.catch( e => {errorUp.innerHTML = e.message;done = 0;});if(done) upEmail.value = "", upPass.value = "", errorUp.innerHTML = "";}function logOut(){auth.signOut();mainPage.classList.add("hide");firstPage.classList.remove("hide");}firebase.auth().onAuthStateChanged(fireUser => {if(fireUser){signInPage.classList.add("hide");signUpPage.classList.add("hide");firstPage.classList.add("hide");mainPage.classList.remove("hide");user = fireUser.email;}else{signInPage.classList.add("hide");signUpPage.classList.add("hide");firstPage.classList.remove("hide");mainPage.classList.add("hide");}});function Input(i){database.ref("message/" + i + "").on('value', snap => {if(snap.val().sender != user)textarea.innerHTML += '<div class="message"><p class="hayre"><i>' + snap.val().sender + '</i> : </p>' + snap.val().msgText + '</div><br>';else textarea.innerHTML += '<div class="messageMe"><p class= "hayre"><i>' + snap.val().sender + '</i> : </p>' + snap.val().msgText + '</div><br>';});}database.ref("totalMessages").on('value', snap => {textarea.innerHTML = "";totalMessage = snap.val() - "0";for(var i = 1; i <= totalMessage; i++){Input(i);}});function send(){var textToSend = messageBody.value.trim();if(textToSend != ""){var k = totalMessage + 1;firebase.database().ref('message/' + k + "").set({ msgText: textToSend, sender: user });firebase.database().ref("totalMessages").set(k);}messageBody.value = "";}</script></body>